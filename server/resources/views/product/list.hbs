<div
  class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
>
  <h1 class="h2">Products</h1>
  <a
    href="/products/new"
    class="btn btn-sm btn-outline-primary"
  >Create new</a>
</div>
<div class="table-responsive">
  <table class="table table-striped table-sm">
    <thead>
      <tr>
        <th class="px-3 py-2" scope="col">#</th>
        <th class="px-3 py-2" scope="col">Name</th>
        <th class="px-3 py-2" scope="col">Unit Price</th>
        <th class="px-3 py-2" scope="col">Stock</th>
        <th class="px-3 py-2" scope="col">Current Discount</th>
        <th class="px-3 py-2" scope="col">End Discount</th>
        <th class="px-3 py-2" scope="col">Next Discount</th>
        <th class="px-3 py-2" scope="col"></th>
      </tr>
    </thead>
    <tbody>
      {{#each data}}
      <tr>
        <td class="px-3 py-2">{{ sum @index 1 }}</td>
        <td class="px-3 py-2">{{ this.name }}</td>
        <td class="px-3 py-2">{{ currency this.unitPrice }}</td>
        <td class="px-3 py-2">{{ this.stock }}</td>
        <td class="px-3 py-2">{{ this.currentDiscount }}</td>
        <td class="px-3 py-2">{{ datetimeFormat this.endDiscount 'YYYY-MM-DD' }}</td>
        <td class="px-3 py-2">{{ this.nextDiscount }}</td>
        <td class="px-3 py-2">
          <a href="/products/{{this._id}}/edit" class="btn btn-secondary">Edit</a>
          {{#if this.canDiscount}}
          <a href="/products/{{this._id}}/discount" class="btn btn-primary">Discount</a>
          {{/if}}
        </td>
      </tr>
      {{/each }}
    </tbody>
  </table>
  <div class="pagination d-flex align-items-center justify-content-center">
    {{#if hasPrev}}
    <div class="paginate-item cursor"><a href="/products?page={{ sum currentPage -1 }}"> << </a></div>
    {{/if}}
    {{#if (not_equal currentPage 1)}}
    <div class="paginate-item cursor"><a href="/products">1</a></div>
    {{/if}}
    {{#if (not_equal 1 lastPage)}}
    <div class="paginate-item active">{{ currentPage }}</div>
    {{/if}}
    {{#if (not_equal currentPage lastPage)}}
    <div class="paginate-item cursor"><a href="/products?page={{ lastPage }}">{{ lastPage }}</a></div>
    <span>{{ lastPage }}</span>
    {{/if}}
    {{#if hasNext}}
    <div class="paginate-item cursor"><a href="/products?page={{ sum currentPage 1 }}"> >> </a></div>
    {{/if}}
  </div>
</div>